
    <app-right-panel 
      [isOpen]="isOpen" 
      panelTitle="Notes"
      (close)="onClose()"
    >
      <div class="notes-container">
        <!-- Note Title -->
        <div class="note-header">
          <input 
            type="text"
            [(ngModel)]="currentNote.title"
            class="note-title-input"
            placeholder="Note title..."
            (input)="onNoteChange()"
          />
          <div class="note-meta">
            <span *ngIf="currentNote.updatedAt">Last updated: {{ currentNote.updatedAt | date:'short' }}</span>
          </div>
        </div>

        <!-- Formatting Toolbar -->
        <div class="formatting-toolbar">
          <div class="toolbar-group">
            <button class="format-btn" (click)="formatText('bold')" [class.active]="isFormatActive('bold')">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                <path d="M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z" stroke="currentColor" stroke-width="2"/>
                <path d="M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z" stroke="currentColor" stroke-width="2"/>
              </svg>
            </button>
            <button class="format-btn" (click)="formatText('italic')" [class.active]="isFormatActive('italic')">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                <line x1="19" y1="4" x2="10" y2="4" stroke="currentColor" stroke-width="2"/>
                <line x1="14" y1="20" x2="5" y2="20" stroke="currentColor" stroke-width="2"/>
                <line x1="15" y1="4" x2="9" y2="20" stroke="currentColor" stroke-width="2"/>
              </svg>
            </button>
            <button class="format-btn" (click)="formatText('underline')" [class.active]="isFormatActive('underline')">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                <path d="M6 3v7a6 6 0 0 0 6 6 6 6 0 0 0 6-6V3" stroke="currentColor" stroke-width="2"/>
                <line x1="4" y1="21" x2="20" y2="21" stroke="currentColor" stroke-width="2"/>
              </svg>
            </button>
            <button class="format-btn" (click)="formatText('strikethrough')">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                <path d="M6 16a6 6 0 0 0 10.3 1.1" stroke="currentColor" stroke-width="2"/>
                <path d="M8.21 13.89A6 6 0 0 0 6 16" stroke="currentColor" stroke-width="2"/>
                <path d="M15.5 7.5A6 6 0 0 0 6 9" stroke="currentColor" stroke-width="2"/>
                <line x1="3" y1="12" x2="21" y2="12" stroke="currentColor" stroke-width="2"/>
              </svg>
            </button>
          </div>
          
          <div class="toolbar-group">
            <button class="format-btn" (click)="formatText('insertUnorderedList')">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                <line x1="8" y1="6" x2="21" y2="6" stroke="currentColor" stroke-width="2"/>
                <line x1="8" y1="12" x2="21" y2="12" stroke="currentColor" stroke-width="2"/>
                <line x1="8" y1="18" x2="21" y2="18" stroke="currentColor" stroke-width="2"/>
                <line x1="3" y1="6" x2="3.01" y2="6" stroke="currentColor" stroke-width="2"/>
                <line x1="3" y1="12" x2="3.01" y2="12" stroke="currentColor" stroke-width="2"/>
                <line x1="3" y1="18" x2="3.01" y2="18" stroke="currentColor" stroke-width="2"/>
              </svg>
            </button>
            <button class="format-btn" (click)="formatText('insertOrderedList')">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                <line x1="10" y1="6" x2="21" y2="6" stroke="currentColor" stroke-width="2"/>
                <line x1="10" y1="12" x2="21" y2="12" stroke="currentColor" stroke-width="2"/>
                <line x1="10" y1="18" x2="21" y2="18" stroke="currentColor" stroke-width="2"/>
                <path d="M4 6h1v4" stroke="currentColor" stroke-width="2"/>
                <path d="M4 10h2" stroke="currentColor" stroke-width="2"/>
                <path d="M6 18H4c0-1 2-2 2-3s-1-1.5-2-1" stroke="currentColor" stroke-width="2"/>
              </svg>
            </button>
          </div>

          <div class="toolbar-group">
            <button class="format-btn" (click)="formatText('formatBlock', 'h2')">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                <path d="M4 12h8m-8-6v12m8-12v12m5 0v-4a2 2 0 0 1 2-2 2 2 0 0 1 2 2v4m-4-2h4" stroke="currentColor" stroke-width="2"/>
              </svg>
            </button>
            <button class="format-btn" (click)="insertLink()">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                <path d="M9 12l2 2 4-4" stroke="currentColor" stroke-width="2"/>
                <path d="M21 12c.552 0 1-.449 1-1s-.448-1-1-1" stroke="currentColor" stroke-width="2"/>
                <path d="M3 12c-.552 0-1-.449-1-1s.448-1 1-1" stroke="currentColor" stroke-width="2"/>
                <path d="M12.5 21c-.828 0-1.5-.672-1.5-1.5s.672-1.5 1.5-1.5" stroke="currentColor" stroke-width="2"/>
                <path d="M12.5 3c-.828 0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5" stroke="currentColor" stroke-width="2"/>
              </svg>
            </button>
          </div>
        </div>

        <!-- Note Editor -->
        <div class="note-editor">
          <div 
            class="rich-text-editor"
            contenteditable="true"
            [innerHTML]="currentNote.content"
            (input)="onContentChange($event)"
            #noteEditor
            placeholder="Start writing your note..."
          ></div>
        </div>

        <!-- Auto-save indicator -->
        <div class="save-indicator" [class.saving]="isSaving">
          <span *ngIf="!isSaving">âœ“ Saved</span>
          <span *ngIf="isSaving">Saving...</span>
        </div>
      </div>
    </app-right-panel>
  